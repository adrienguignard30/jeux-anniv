<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Les D√©tectives du Myst√®re Magique</title>

<!-- Open Graph pour partage r√©seaux sociaux -->
<meta property="og:title" content="Les D√©tectives du Myst√®re Magique" />
<meta property="og:description" content="Une aventure interactive magique ! R√©sous les √©nigmes et traverse le portail... ‚ú®" />
<meta property="og:image" content="https://jeux-anniv.vercel.app/assets/images/image-lien.png" />
<meta property="og:url" content="https://jeux-anniv.vercel.app" />
<meta property="og:type" content="website" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Les D√©tectives du Myst√®re Magique" />
<meta name="twitter:description" content="Une aventure interactive magique ! R√©sous les √©nigmes et traverse le portail... ‚ú®" />
<meta name="twitter:image" content="https://jeux-anniv.vercel.app/assets/images/image-lien.png" />

<link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Particules magiques de fond -->
    <div class="particles" id="particles"></div>

    <!-- √âCRAN 0 : Accueil -->
    <div id="screen-welcome" class="screen active">
        <div class="welcome-content">
            <h1 class="magic-title">‚ú® Les D√©tectives du<br>Myst√®re Magique ‚ú®</h1>
            <div class="subtitle">Une aventure attend les courageux...</div>
            <button class="magic-button" onclick="startGame()">
                COMMENCER L'AVENTURE
            </button>
        </div>
    </div>

    <!-- √âCRAN 0.5 : Vid√©o PR√â-INTRO -->
    <div id="screen-pre-intro" class="screen">
        <video id="video-pre-intro" class="fullscreen-video" playsinline preload="auto">
            <source src="assets/videos/pre-intro.mp4" type="video/mp4">
            <source src="assets/videos/pre-intro.webm" type="video/webm">
            Votre navigateur ne supporte pas la vid√©o.
        </video>
        <div class="video-overlay">
            <button class="skip-button" onclick="skipPreIntro()">Passer ‚è≠Ô∏è</button>
        </div>
    </div>

    <!-- √âCRAN 1 : Vid√©o Intro -->
    <div id="screen-intro" class="screen">
        <video id="video-intro" class="fullscreen-video" playsinline preload="auto">
            <source src="assets/videos/intro.mp4" type="video/mp4">
            <source src="assets/videos/intro.webm" type="video/webm">
            Votre navigateur ne supporte pas la vid√©o.
        </video>
        <div class="video-overlay">
            <button class="skip-button" onclick="skipIntro()">Passer ‚è≠Ô∏è</button>
        </div>
    </div>

    <!-- √âCRAN 2 : √âpreuve 1 - Cri Magique -->
    <div id="screen-cri" class="screen">
        <div class="challenge-container">
            <h2 class="challenge-title">‚ö° √âPREUVE 1 : LE CRI MAGIQUE ‚ö°</h2>
            
          <div class="portal-container" id="portal-cri-placeholder">
                </div> 

            <div class="instruction-box">
                <p>Pour r√©veiller le portail, vous devez TOUS crier<br>la formule magique ensemble :</p>
                <div class="magic-formula">‚ú® ABRACADABRA R√âV√âLEZ-VOUS ! ‚ú®</div>
            </div>

            <div class="voice-meter-container">
                <div class="voice-label">üé§ Puissance vocale</div>
                <div class="voice-meter">
                    <div class="voice-level" id="voice-level"></div>
                </div>
                <div class="voice-percentage" id="voice-percentage">0%</div>
            </div>

            <button class="admin-button" onclick="forceValidateCri()">
                ‚úÖ VALIDER MANUELLEMENT (Admin)
            </button>
        </div>
    </div>

    <!-- √âCRAN 2.5 : Transition Portail Activ√© -->
    <div id="screen-transition-1" class="screen">
        <div class="transition-container">
            <div class="portal-activated">
                <div class="pulse-circle"></div>
                <h2 class="success-text">‚úÖ LE PORTAIL S'√âVEILLE !</h2>
                <p class="transition-text">Mais il n'est pas encore ouvert...<br>Une derni√®re √©preuve vous attend...</p>
            </div>
        </div>
    </div>

    <!-- √âCRAN 2.7 : Vid√©o Pre-Portail -->
    <div id="screen-pre-portail" class="screen">
        <video id="video-pre-portail" class="fullscreen-video" playsinline preload="auto">
            <source src="assets/videos/pre-portail.mp4" type="video/mp4">
            Votre navigateur ne supporte pas la vid√©o.
        </video>
        <div class="video-overlay">
            <button class="skip-button" onclick="skipPrePortail()">Passer ‚è≠Ô∏è</button>
        </div>
    </div>

    <!-- √âCRAN 3 : Vid√©o Silence (Magicien fait "chut") -->
    <div id="screen-silence-video" class="screen">
        <video id="video-silence" class="fullscreen-video" playsinline>
            <source src="assets/videos/silence.mp4" type="video/mp4">
        </video>
        <div class="video-overlay">
            
            <button class="skip-button" onclick="skipSilence()">Passer ‚è≠Ô∏è</button>
        </div>
    </div>

    <!-- √âCRAN 4 : √âpreuve 2 - Silence Absolu -->
    <div id="screen-silence" class="screen">
        <div class="challenge-container">
            <h2 class="challenge-title">ü§´ √âPREUVE 2 : LE SILENCE ABSOLU ü§´</h2>
            
            <div class="timer-container">
                <div class="timer-label">Temps restant</div>
                <div class="timer-display" id="silence-timer">00:30</div>
            </div>

            <div class="silence-image-container">
                <img id="silence-animation" src="assets/images/boucle/transparent_frame_00_100.png" alt="Silence" class="silence-icon">
            </div>

            <div class="sound-meter-container">
                <div class="sound-label">üé§ Niveau sonore</div>
                <div class="sound-meter">
                    <div class="sound-level" id="sound-level"></div>
                </div>
                <div class="sound-warning" id="sound-warning">‚ö†Ô∏è Trop de bruit ! Restez calmes !</div>
            </div>

            <div class="instruction-text">Chuuut... pas un bruit !</div>

            <button class="admin-button" onclick="forceValidateSilence()">
                ‚úÖ R√âUSSIR L'√âPREUVE (Admin)
            </button>
        </div>
    </div>

    <!-- √âCRAN 5 : Ouverture Portail -->
    <div id="screen-portail-ouvert" class="screen">
        <div class="portal-opening">
            <h2 class="explosion-text">‚ú®‚ú®‚ú® VOUS AVEZ R√âUSSI ! ‚ú®‚ú®‚ú®</h2>
            <p class="portal-message">
                Incroyable ! Vous avez prouv√© votre courage ET votre ma√Ætrise !<br>
                Le Portail s'ouvre pour vous !
            </p>
            <video id="portal-video" class="portal-video portal-finale" loop muted playsinline preload="auto">
                <source src="assets/videos/portail.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la vid√©o.
            </video>
            <div class="portal-explosion"></div>
        </div>
    </div>

    <!-- √âCRAN 6 : Tunnel de Travers√©e -->
    <div id="screen-tunnel" class="screen">
        <div class="tunnel-container">
            <div class="tunnel-effect"></div>
        </div>
    </div>

    <!-- √âCRAN 7 : Biblioth√®que - Arriv√©e -->
    <div id="screen-bibliotheque-intro" class="screen">
        <video id="video-livre-intro" class="fullscreen-video" autoplay loop muted playsinline preload="auto">
            <source src="assets/videos/livre.mp4" type="video/mp4">
            Votre navigateur ne supporte pas la vid√©o.
        </video>

        <div class="library-container video-overlay">
            <h2 class="library-title animated-title">Bienvenue dans mon sanctuaire secret...</h2>
            <div class="library-message" id="library-message-text">
                </div>
            <button class="magic-button" onclick="startBookCalling()">
                COMMENCER L'APPEL
            </button>
        </div>
    </div>

    <!-- √âCRAN 8 : Appel des 14 Enfants -->
    <div id="screen-livres" class="screen">
        <video id="background-livres-video" class="fullscreen-video" autoplay loop muted playsinline preload="auto">
            <source src="assets/videos/background-livres.mp4" type="video/mp4">
            Votre navigateur ne supporte pas la vid√©o.
        </video>
        
        <div class="livres-content-overlay">
            <div class="books-container">
            <h2 class="books-title">üìö Les Livres Magiques üìö</h2>
            
            <div class="books-circle" id="books-circle">
                </div>

            <div class="current-call" id="current-call">
                <div class="call-name" id="call-name">NINA</div>
                <div class="call-question">Es-tu l√† ?</div>
                <div class="speaking-indicator" id="speaking-indicator">
                    <span class="wave"></span>
                    <span class="wave"></span>
                    <span class="wave"></span>
                </div>
            </div>

            <div class="voice-indicator">
                <div class="voice-status" id="voice-status">En attente...</div>
                <div class="book-voice-meter-container">
                    <div class="book-voice-meter">
                        <div class="book-voice-level" id="book-voice-level"></div>
                    </div>
                    <div class="book-voice-percentage" id="book-voice-percentage">0%</div>
                </div>
            </div>

            <div class="progress-counter" id="progress-counter">0 / 14</div>

            <button class="admin-button" onclick="forceValidateBook()">
                ‚úÖ <span id="current-book-name">NINA</span> EST PR√âSENT(E)
            </button>
            </div>
        </div>
    </div>

    <!-- √âCRAN 9 : Vid√©o Premier Indice -->
    <div id="screen-premier-indice" class="screen">
        <video id="video-premier-indice" class="fullscreen-video" playsinline preload="auto">
            <source src="assets/videos/premier-indice.mp4" type="video/mp4">
            Votre navigateur ne supporte pas la vid√©o.
        </video>
        <div class="video-overlay">
            <button class="skip-button" onclick="skipPremierIndice()">Passer ‚è≠Ô∏è</button>
        </div>
    </div>

    <!-- √âCRAN 10 : Vid√©o Finale -->
    <div id="screen-finale" class="screen">
        <video id="video-finale" class="fullscreen-video" playsinline>
            <source src="assets/videos/finale.mp4" type="video/mp4">
        </video>
        <div class="video-overlay">
            <button class="skip-button" onclick="skipFinale()">Passer ‚è≠Ô∏è</button>
        </div>
    </div>

    <!-- √âCRAN 11 : Message Final -->
    <div id="screen-final" class="screen">
        <div class="final-container">
            <div class="confetti" id="confetti"></div>
            <h1 class="final-title">
                ‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®
                <br>
                üéØ RENDEZ-VOUS √Ä<br>L'AIRE DE JEUX !
                <br>
                ‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®
            </h1>
            
            <div class="final-image-container">
                <img src="assets/images/aire-de-jeux.png" alt="Aire de jeux" class="final-image">
            </div>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>